<extends src="layout.html">
  <block name="audios-menu-item">
    <a href="/" class="text-white bg-teal-800 rounded-md">Audios</a>
  </block>
  <block name="content">
    <div id="searchbox" class="flex flex-none mx-auto p-4 w-full max-w-screen-xl border-b sm:pl-36 md:pl-56 lg:pl-72">
      <input
        type="search"
        placeholder="Search for title, topics, locations, dates, etc."
        class="placeholder-gray-300 block px-3 py-2 w-full leading-6 border border-r-0 border-gray-300 focus:border-gray-300 rounded-l-md rounded-none focus:outline-none appearance-none focus:ring-0"
      />
      <button type="submit" class="sm:px4 px-2 text-white font-semibold bg-teal-800 border-l-0 border-gray-300 rounded-r-md shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6 sm:hidden">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <span class="hidden sm:inline">Search</span>
      </button>
    </div>
    <div class="flex flex-1 mx-auto w-full max-w-screen-xl sm:overflow-y-hidden">
      <div id="filter-panel" class="fixed z-20 top-0 open:flex hidden flex-col w-64 max-w-full h-full text-sm bg-white md:static md:z-auto md:flex md:w-1/5 md:max-w-sm">
        <div class="flex-none p-2 text-center text-teal-800 font-bold bg-submarine-500 uppercase md:hidden">Filter</div>
        <div class="flex-grow p-2 pb-40 pt-0 overflow-x-hidden overflow-y-auto">
          <div id="language-list"></div>
          <div id="sound-quality-list"></div>
          <div id="duration-menu"></div>
          <div id="percentage-menu"></div>
          <div id="category-list"></div>
          <div id="year-list"></div>
          <div id="location-list"></div>
        </div>
        <div class="flex-none p-2 border-t md:hidden">
          <button data-filter-toggle class="p-2 w-full text-white font-semibold bg-teal-800 rounded-md shadow-sm uppercase">Close</button>
        </div>
      </div>
      <main class="flex-grow pb-40 px-2 w-full sm:px-4 sm:w-4/5 sm:overflow-y-auto">
        <div class="flex items-center my-3">
          <!-- Filter button -->
          <button data-filter-toggle class="inline-flex items-center mr-4 px-4 py-2 w-24 text-white font-semibold bg-teal-800 border-gray-300 rounded-md shadow-sm space-x-1 md:hidden">
            <!-- Heroicon name: solid/filter -->
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path
                fill-rule="evenodd"
                d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"
                clip-rule="evenodd"
              />
            </svg>
            <span>Filter</span>
          </button>
          <span id="stats" class="whitespace-nowrap text-sm"></span>
          <span id="loading" class="text-gray-500 text-sm">Loading…</span>
        </div>
        <div id="hits">
          <template id="item-template">
            <article class="flex flex-col py-1 w-full sm:flex-row sm:py-2" x-data="searchResultItem({{objectID}})" x-id="Search Result {{objectID}}" x-spread="self">
              <!-- Main section -->
              <div class="flex flex-grow items-start">
                <!-- Play button -->
                <button class="flex-none w-7 focus:outline-none fill-current" title="Play" type="button" x-spread="playButton">
                  <!-- Material Icons: Play Arrow -->
                  <svg x-show="!isPlaying" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z" />
                  </svg>
                  <!-- Material Icons: Pause -->
                  <svg x-show="isPlaying" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" x-cloak>
                    <path d="M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z" />
                  </svg>
                </button>
                <div class="flex-grow">
                  <!-- First line -->
                  <div class="flex items-start justify-between space-x-1">
                    <!-- Title -->
                    <h3 class="flex-grow break-words font-semibold" title="{{title}}">{{#helpers.highlight}} { "attribute": "title" } {{/helpers.highlight}}</h3>
                    <!-- Duration -->
                    <span class="flex-none" title="Duration">{{durationForHumans}}</span>
                  </div>
                  <!-- Second line -->
                  <div class="flex items-end justify-between">
                    <!-- Tags -->
                    <div class="children:last:border-0 flex flex-wrap content-between align-baseline children:mr-1 children:mt-1 children:pr-1 text-xs children:border-r children:border-gray-300">
                      <!-- ID -->
                      <div title="Unique file identifier">#{{idPadded}}</div>
                      <!-- Date -->
                      {{#_highlightResult.dateForHumans}}
                      <div title="Date">
                        {{{value}}} {{#dateUncertain}}
                        <span title="Date is uncertain">(?)</span>
                        {{/dateUncertain}} {{#timeOfDay}}
                        <span title="Time of day">{{timeOfDay}}</span>
                        {{/timeOfDay}}
                      </div>
                      {{/_highlightResult.dateForHumans}} {{^_highlightResult.dateForHumans}}
                      <div>Date unknown</div>
                      {{/_highlightResult.dateForHumans}}
                      <!-- Location -->
                      {{#_highlightResult.location}}
                      <div title="Location">
                        {{{value}}} {{#locationUncertain}}
                        <span title="Location is uncertain">(?)</span>
                        {{/locationUncertain}}
                      </div>
                      {{/_highlightResult.location}} {{^_highlightResult.location}}
                      <div>Location unknown</div>
                      {{/_highlightResult.location}}
                      <!-- Category -->
                      {{#_highlightResult.category}}
                      <div title="Category">{{{value}}}</div>
                      {{/_highlightResult.category}}
                      <!-- Languages -->
                      {{#_highlightResult.languages}}
                      <div title="Language spoken in the recording">{{{value}}}</div>
                      {{/_highlightResult.languages}}
                    </div>
                    <!-- Actions -->
                    <div class="flex children:ml-1 children:pl-1 text-sm divide-x">
                      <!-- Download -->
                      <a href="{{downloadURL}}" class="inline-flex space-x-1" title="Download file for listening offline">
                        <svg class="w-4 h-full" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        <span class="hidden lg:inline">Download</span>
                      </a>
                      <!-- Feedback -->
                      <a
                        href="{{feedbackURL}}"
                        target="_blank"
                        class="inline-flex space-x-1"
                        title="Help us improve! Give feedback about the sound quality, title, contents, language, etc of this file"
                      >
                        <svg class="w-4 h-full stroke-current" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                          />
                        </svg>
                        <span class="hidden lg:inline">Feedback</span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Complimentary section -->
              <div
                class="flex flex-none items-end mt-2 pb-2 pl-7 pt-2 border-gray-200 space-x-2 sm:flex-col sm:items-start sm:ml-4 sm:mt-0 sm:pl-4 sm:pt-0 sm:w-36 sm:border-l sm:space-x-0 sm:space-y-2"
              >
                <!-- Percentage -->
                {{#percentage}}
                <div class="relative text-xs border border-gray-300 rounded-lg overflow-hidden" title="How much Srila Gurudeva is speaking in the recording">
                  <!-- Changing delimiters to make interpolation in the `styles` attribute work -->
                  {{=^% %^=}}
                  <div class="absolute z-auto h-full bg-gray-300 shadow-none" style="width: ^%percentageRounded%^%"></div>
                  ^%={{ }}=%^
                  <div class="flex justify-between px-1.5 w-full opacity-95 space-x-2">
                    <span class="whitespace-nowrap">Srila Gurudeva</span>
                    <span>{{percentageRounded}}%</span>
                  </div>
                </div>
                {{/percentage}}
                <!-- Sound Quality Rating -->
                {{#soundQualityRating}}
                <div class="{{soundQualityRatingColor}} flex flex-none px-1.5 text-xs border rounded-lg space-x-1" title="Sound quality of the recording">
                  <svg class="flex-none w-4 h-4 stroke-current stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path
                      d="M83 384c-13-33-35-93.37-35-128C48 141.12 149.33 48 256 48s208 93.12 208 208c0 34.63-23 97-35 128"
                      fill="none"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="32"
                    />
                    <path
                      d="M108.39 270.13l-13.69 8h0c-30.23 17.7-31.7 72.41-3.38 122.2s75.87 75.81 106.1 58.12h0l13.69-8a16.16 16.16 0 005.78-21.87L130 276a15.74 15.74 0 00-21.61-5.87zM403.61 270.13l13.69 8h0c30.23 17.69 31.74 72.4 3.38 122.19s-75.87 75.81-106.1 58.12h0l-13.69-8a16.16 16.16 0 01-5.78-21.87L382 276a15.74 15.74 0 0121.61-5.87z"
                      fill="none"
                      stroke="currentColor"
                      stroke-miterlimit="10"
                      stroke-width="32"
                    />
                  </svg>
                  <span>{{soundQualityRatingLabel}}</span>
                </div>
                {{/soundQualityRating}}
              </div>
            </article>
          </template>
        </div>
        <div id="pagination" class="my-2 w-full"></div>
        <p id="under-progress" class="hidden p-2 text-center text-gray-500 text-sm">
          This Archive is under progress and will be completed by 2023. Progressively, new recordings will be added regularly. If you don’t find the audio you are looking for, we request you to check
          again later.
        </p>
      </main>
    </div>
    <!-- Player UI -->
    <div
      id="player"
      x-cloak
      x-data="player()"
      x-init="init"
      x-spread="self"
      class="fixed z-10 bottom-0 left-0 right-0 flex flex-none flex-col-reverse mx-auto px-3 py-2 w-full max-w-screen-xl bg-gray-100 border-t border-gray-300 rounded-t-md shadow-xl-around overflow-hidden md:flex-row md:space-x-6"
    >
      <!-- Controls -->
      <div class="flex flex-col justify-between">
        <!-- Buttons -->
        <div class="flex items-center justify-center mb-1 space-x-2 sm:mb-0 md:justify-between">
          <button x-spread="seekButton" data-seek-amount="-30" class="w-7">
            <svg class="w-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8zm-2.44 8.49h.45c.21 0 .37-.05.48-.16s.16-.25.16-.43c0-.08-.01-.15-.04-.22s-.06-.12-.11-.17-.11-.09-.18-.11-.16-.04-.25-.04c-.08 0-.15.01-.22.03s-.13.05-.18.1-.09.09-.12.15-.05.13-.05.2h-.85c0-.18.04-.34.11-.48s.17-.27.3-.37.27-.18.44-.23.35-.08.54-.08c.21 0 .41.03.59.08s.33.13.46.23.23.23.3.38.11.33.11.53c0 .09-.01.18-.04.27s-.07.17-.13.25-.12.15-.2.22-.17.12-.28.17c.24.09.42.21.54.39s.18.38.18.61c0 .2-.04.38-.12.53s-.18.29-.32.39-.29.19-.48.24-.38.08-.6.08c-.18 0-.36-.02-.53-.07s-.33-.12-.46-.23-.25-.23-.33-.38-.12-.34-.12-.55h.85c0 .08.02.15.05.22s.07.12.13.17.12.09.2.11.16.04.25.04c.1 0 .19-.01.27-.04s.15-.07.2-.12.1-.11.13-.18.04-.15.04-.24c0-.11-.02-.21-.05-.29s-.08-.15-.14-.2-.13-.09-.22-.11-.18-.04-.29-.04h-.47v-.65zm5.74.75c0 .32-.03.6-.1.82s-.17.42-.29.57-.28.26-.45.33-.37.1-.59.1-.41-.03-.59-.1-.33-.18-.46-.33-.23-.34-.3-.57-.11-.5-.11-.82v-.74c0-.32.03-.6.1-.82s.17-.42.29-.57.28-.26.45-.33.37-.1.59-.1.41.03.59.1.33.18.46.33.23.34.3.57.11.5.11.82v.74zm-.85-.86c0-.19-.01-.35-.04-.48s-.07-.23-.12-.31-.11-.14-.19-.17-.16-.05-.25-.05-.18.02-.25.05-.14.09-.19.17-.09.18-.12.31-.04.29-.04.48v.97c0 .19.01.35.04.48s.07.24.12.32.11.14.19.17.16.05.25.05.18-.02.25-.05.14-.09.19-.17.09-.19.11-.32c.03-.13.04-.29.04-.48v-.97z"
              />
            </svg>
          </button>
          <button x-spread="playButton" class="w-10">
            <svg x-show="!isPlaying" class="w-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path d="M10 16.5l6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
            </svg>
            <svg x-show="isPlaying" class="w-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path d="M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z" />
            </svg>
          </button>
          <button x-spread="seekButton" data-seek-amount="30" class="w-7">
            <svg class="w-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M18 13c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6v4l5-5-5-5v4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8h-2zm-7.46 2.22c-.06.05-.12.09-.2.12s-.17.04-.27.04c-.09 0-.17-.01-.25-.04s-.14-.06-.2-.11-.1-.1-.13-.17-.05-.14-.05-.22h-.85c0 .21.04.39.12.55s.19.28.33.38.29.18.46.23.35.07.53.07c.21 0 .41-.03.6-.08s.34-.14.48-.24.24-.24.32-.39.12-.33.12-.53c0-.23-.06-.44-.18-.61s-.3-.3-.54-.39c.1-.05.2-.1.28-.17s.15-.14.2-.22.1-.16.13-.25.04-.18.04-.27c0-.2-.04-.37-.11-.53s-.17-.28-.3-.38-.28-.18-.46-.23-.37-.08-.59-.08c-.19 0-.38.03-.54.08s-.32.13-.44.23-.23.22-.3.37-.11.3-.11.48h.85c0-.07.02-.14.05-.2s.07-.11.12-.15.11-.07.18-.1.14-.03.22-.03c.1 0 .18.01.25.04s.13.06.18.11.08.11.11.17.04.14.04.22c0 .18-.05.32-.16.43s-.26.16-.48.16h-.43v.66h.45c.11 0 .2.01.29.04s.16.06.22.11.11.12.14.2.05.18.05.29c0 .09-.01.17-.04.24s-.08.11-.13.17zm3.9-3.44c-.18-.07-.37-.1-.59-.1s-.41.03-.59.1-.33.18-.45.33-.23.34-.29.57-.1.5-.1.82v.74c0 .32.04.6.11.82s.17.42.3.57.28.26.46.33.37.1.59.1.41-.03.59-.1.33-.18.45-.33.22-.34.29-.57.1-.5.1-.82v-.74c0-.32-.04-.6-.11-.82s-.17-.42-.3-.57-.28-.26-.46-.33zm.01 2.57c0 .19-.01.35-.04.48s-.06.24-.11.32-.11.14-.19.17-.16.05-.25.05-.18-.02-.25-.05-.14-.09-.19-.17-.09-.19-.12-.32-.04-.29-.04-.48v-.97c0-.19.01-.35.04-.48s.06-.23.12-.31.11-.14.19-.17.16-.05.25-.05.18.02.25.05.14.09.19.17.09.18.12.31.04.29.04.48v.97z"
              />
            </svg>
          </button>
        </div>
        <!-- Volume control -->
        <div class="hidden flex-none items-center h-6 md:flex">
          <button x-spread="muteButton">
            <svg x-spread="unmutedIcon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"
              />
            </svg>
            <svg x-spread="mutedIcon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#4b5563">
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M4.34 2.93L2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM10 15.17L7.83 13H5v-2h2.83l.88-.88L10 11.41v3.76zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8l-1.88 1.88L12 7.76zm4.5 8c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"
              />
            </svg>
          </button>
          <input type="range" min="0" max="1" step="any" x-ref="volumeSlider" x-spread="volumeSlider" class="flex-none w-24" />
        </div>
      </div>
      <!-- Main block -->
      <div class="overflow-hidden md:flex-grow">
        <!-- Title -->
        <div x-text="contentDetails.title" class="no-scrollbar flex-grow whitespace-nowrap font-semibold overflow-x-auto"></div>
        <!-- Second line with tags and actions -->
        <div class="flex mt-1 overflow-hidden space-x-2">
          <!-- Tags -->
          <div class="no-scrollbar children:not-first:pl-1 flex children:flex-none flex-grow text-xs children:border-gray-300 divide-x overflow-x-auto space-x-1">
            <!-- ID -->
            <div title="Unique file identifier">#<span x-text="idPadded"></span></div>
            <!-- Date -->
            <template x-if="contentDetails.dateForHumans">
              <div title="Date">
                <span x-text="contentDetails.dateForHumans"></span>
                <template x-if="contentDetails.dateUncertain">
                  <span title="Date is uncertain">(?)</span>
                </template>
              </div>
            </template>
            <!-- Location -->
            <template x-if="contentDetails.location">
              <div title="Location">
                <span x-text="contentDetails.location"></span>
                <template x-if="contentDetails.locationUncertain">
                  <span title="Location is uncertain">(?)</span>
                </template>
              </div>
            </template>
            <!-- Category -->
            <template x-if="contentDetails.category">
              <div x-text="contentDetails.category" title="Category"></div>
            </template>
            <!-- Languages -->
            <template x-for="language in contentDetails.languages" :key="language">
              <div x-text="language" title="Language spoken in the recording"></div>
            </template>
          </div>
          <!-- Actions -->
          <div class="children:not-first:pl-1 flex flex-none items-baseline text-xs divide-x space-x-1">
            <!-- Download -->
            <a :href="downloadURL" title="Download file for listening offline">
              <svg class="inline align-bottom w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
              </svg>
              <span class="hidden align-text-bottom lg:inline">Download</span>
            </a>
            <!-- Feedback -->
            <a :href="feedbackURL" target="_blank" title="Help us improve! Give feedback about the sound quality, title, contents, language, etc of this file">
              <svg class="inline align-bottom w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
              </svg>
              <span class="hidden align-text-bottom lg:inline">Feedback</span>
            </a>
          </div>
        </div>
        <!-- Seek control with timings -->
        <div class="flex items-center h-6 space-x-2">
          <span x-text="currentTimeForHumans" class="flex-none text-xs tabular-nums"></span>
          <input type="range" min="0" x-ref="seekSlider" x-spread="seekSlider" class="flex-grow h-1.5" />
          <span x-text="durationForHumans" class="flex-none text-xs tabular-nums"></span>
        </div>
      </div>
    </div>
  </block>
  <block name="scripts">
    <script type="module" src="./audios.js"></script>
  </block>
</extends>
